public static Integer longestDistinctSubstring(String str, Integer k){ 
    Integer iCurrent=0, iDifferentChar=0;
    Integer lMax=0, lCurrent=0;
    String sMax, sCurrent;
    Boolean bStillOk;

    for (Integer i=0 ; i<str.length() ; i++){
        sCurrent = '';
        //iCurrent = 0;
        iDifferentChar=0;
        bStillOk = true;

        Integer j = i;    
        While (j<str.length()-i && iDifferentChar<=k && bStillOk) {
            String sChar = str.substring(j, j+1);
            if ( !sCurrent.contains(sChar)) {
                if (iDifferentChar<k){
                    iDifferentChar++;
                }
                else {
                    bStillOk = false;
                    break;
                }
            } 
            sCurrent += sChar;
            lCurrent++;
            j++;
        }

        if (lCurrent>lMax) {lMax = lCurrent ; sMax = sCurrent ;}
    }
    return lMax;
}